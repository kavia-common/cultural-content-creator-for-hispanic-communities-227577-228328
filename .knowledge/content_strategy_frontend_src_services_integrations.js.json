{"is_source_file": true, "format": "JavaScript", "description": "This file manages frontend-only integrations with external services such as OpenAI, Meta, WhatsApp, and Canva. It handles tokens, checks integration health via lightweight API calls or configuration flags, and exposes functions to set, clear, and retrieve integration tokens and statuses.", "external_files": ["./openaiClient"], "external_methods": ["require('./openaiClient').getOpenAIKeySource", "require('./openaiClient').getEffectiveOpenAIKey"], "published": ["setIntegrationTokenForSession", "clearIntegrationTokenForSession", "getIntegrationTokenSource", "getIntegrationConfigured", "checkIntegrationHealth", "checkAllIntegrationsHealth", "getCachedIntegrationHealth", "Integrations", "IntegrationHealthStatus"], "classes": [], "methods": [{"name": "setIntegrationTokenForSession(integration, token)", "description": "Sets a temporary in-memory token for the specified integration during the current session.", "scope": "", "scopeKind": ""}, {"name": "clearIntegrationTokenForSession(integration)", "description": "Clears the in-memory token for the specified integration during the current session.", "scope": "", "scopeKind": ""}, {"name": "getIntegrationTokenSource(integration)", "description": "Returns the source ('env', 'memory', or 'none') of the token for a specified integration.", "scope": "", "scopeKind": ""}, {"name": "getIntegrationConfigured(integration)", "description": "Checks whether a given integration has a token configured (via environment or in-memory).", "scope": "", "scopeKind": ""}, {"name": "checkIntegrationHealth(integration)", "description": "Performs a health check on the specified integration, returning its status.", "scope": "", "scopeKind": ""}, {"name": "checkAllIntegrationsHealth()", "description": "Performs health checks for all integrations and returns their statuses.", "scope": "", "scopeKind": ""}, {"name": "getCachedIntegrationHealth()", "description": "Returns the last known health status for all integrations without performing network checks.", "scope": "", "scopeKind": ""}, {"name": "checkNoCorsConfiguredOnly(integration)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "checkOpenAI()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "hasCanvaToken()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "hasMetaToken()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "hasWhatsAppToken()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "nowTs()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["require('./openaiClient').getOpenAIKeySource", "require('./openaiClient').getEffectiveOpenAIKey", "fetch('https://api.openai.com/v1/models')"], "search-terms": ["integrations", "tokens", "health check", "Meta", "WhatsApp", "Canva", "OpenAI", "browser-only", "CORS", "frontend integration"], "state": 2, "file_id": 17, "knowledge_revision": 171, "git_revision": "ffa5604db6edb21c59cc94b775332d0207131f0a", "revision_history": [{"40": "74f1a215a4dbfb17a3ef6c5fe918af92bc0539fc"}, {"171": "ffa5604db6edb21c59cc94b775332d0207131f0a"}], "ctags": [{"_type": "tag", "name": "IntegrationHealthStatus", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^export const IntegrationHealthStatus = HealthStatus;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Integrations", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^export const Integrations = IntegrationKey;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "canva", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  canva: ''$/", "language": "JavaScript", "kind": "property", "scope": "memoryTokens", "scopeKind": "class"}, {"_type": "tag", "name": "canva", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  canva: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' }$/", "language": "JavaScript", "kind": "class", "scope": "healthState", "scopeKind": "class"}, {"_type": "tag", "name": "checkAllIntegrationsHealth", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^export async function checkAllIntegrationsHealth() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "checkIntegrationHealth", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^export async function checkIntegrationHealth(integration) {$/", "language": "JavaScript", "kind": "function", "signature": "(integration)"}, {"_type": "tag", "name": "checkNoCorsConfiguredOnly", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^function checkNoCorsConfiguredOnly(integration) {$/", "language": "JavaScript", "kind": "function", "signature": "(integration)"}, {"_type": "tag", "name": "checkOpenAI", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^async function checkOpenAI() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "clearIntegrationTokenForSession", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^export function clearIntegrationTokenForSession(integration) {$/", "language": "JavaScript", "kind": "function", "signature": "(integration)"}, {"_type": "tag", "name": "getCachedIntegrationHealth", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^export function getCachedIntegrationHealth() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getIntegrationConfigured", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^export function getIntegrationConfigured(integration) {$/", "language": "JavaScript", "kind": "function", "signature": "(integration)"}, {"_type": "tag", "name": "getIntegrationTokenSource", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^export function getIntegrationTokenSource(integration) {$/", "language": "JavaScript", "kind": "function", "signature": "(integration)"}, {"_type": "tag", "name": "hasCanvaToken", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^function hasCanvaToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hasMetaToken", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^function hasMetaToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hasWhatsAppToken", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^function hasWhatsAppToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "healthState", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  healthState[integration] = {$/", "language": "JavaScript", "kind": "class", "scope": "checkIntegrationHealth", "scopeKind": "class"}, {"_type": "tag", "name": "healthState", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^const healthState = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "lastCheckedAt", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^    lastCheckedAt: nowTs()$/", "language": "JavaScript", "kind": "property", "scope": "checkIntegrationHealth.healthState", "scopeKind": "class"}, {"_type": "tag", "name": "lastCheckedAt", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  canva: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' }$/", "language": "JavaScript", "kind": "property", "scope": "healthState.canva", "scopeKind": "class"}, {"_type": "tag", "name": "lastCheckedAt", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  meta: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "property", "scope": "healthState.meta", "scopeKind": "class"}, {"_type": "tag", "name": "lastCheckedAt", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  openai: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "property", "scope": "healthState.openai", "scopeKind": "class"}, {"_type": "tag", "name": "lastCheckedAt", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  whatsapp: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "property", "scope": "healthState.whatsapp", "scopeKind": "class"}, {"_type": "tag", "name": "lastErrorKey", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^    lastErrorKey: result.lastErrorKey,$/", "language": "JavaScript", "kind": "property", "scope": "checkIntegrationHealth.healthState", "scopeKind": "class"}, {"_type": "tag", "name": "lastErrorKey", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  canva: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' }$/", "language": "JavaScript", "kind": "property", "scope": "healthState.canva", "scopeKind": "class"}, {"_type": "tag", "name": "lastErrorKey", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  let result = { status: HealthStatus.disconnected, lastErrorKey: '' };$/", "language": "JavaScript", "kind": "property", "scope": "checkIntegrationHealth.result", "scopeKind": "class"}, {"_type": "tag", "name": "lastErrorKey", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  meta: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "property", "scope": "healthState.meta", "scopeKind": "class"}, {"_type": "tag", "name": "lastErrorKey", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  openai: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "property", "scope": "healthState.openai", "scopeKind": "class"}, {"_type": "tag", "name": "lastErrorKey", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  whatsapp: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "property", "scope": "healthState.whatsapp", "scopeKind": "class"}, {"_type": "tag", "name": "memoryTokens", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^const memoryTokens = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "meta", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  meta: '',$/", "language": "JavaScript", "kind": "property", "scope": "memoryTokens", "scopeKind": "class"}, {"_type": "tag", "name": "meta", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  meta: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "class", "scope": "healthState", "scopeKind": "class"}, {"_type": "tag", "name": "nowTs", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^function nowTs() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "openai", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  openai: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "class", "scope": "healthState", "scopeKind": "class"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  let result = { status: HealthStatus.disconnected, lastErrorKey: '' };$/", "language": "JavaScript", "kind": "class", "scope": "checkIntegrationHealth", "scopeKind": "class"}, {"_type": "tag", "name": "setIntegrationTokenForSession", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^export function setIntegrationTokenForSession(integration, token) {$/", "language": "JavaScript", "kind": "function", "signature": "(integration, token)"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^    status: result.status,$/", "language": "JavaScript", "kind": "property", "scope": "checkIntegrationHealth.healthState", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  canva: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' }$/", "language": "JavaScript", "kind": "property", "scope": "healthState.canva", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  let result = { status: HealthStatus.disconnected, lastErrorKey: '' };$/", "language": "JavaScript", "kind": "property", "scope": "checkIntegrationHealth.result", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  meta: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "property", "scope": "healthState.meta", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  openai: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "property", "scope": "healthState.openai", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  whatsapp: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "property", "scope": "healthState.whatsapp", "scopeKind": "class"}, {"_type": "tag", "name": "whatsapp", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  whatsapp: '',$/", "language": "JavaScript", "kind": "property", "scope": "memoryTokens", "scopeKind": "class"}, {"_type": "tag", "name": "whatsapp", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/integrations.js", "pattern": "/^  whatsapp: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },$/", "language": "JavaScript", "kind": "class", "scope": "healthState", "scopeKind": "class"}], "hash": "3e4207bfc9f4d6053f406cbbf992cdd6", "format-version": 4, "code-base-name": "content_strategy_frontend", "filename": "content_strategy_frontend/src/services/integrations.js", "fields": [{"name": "canva: ''", "scope": "memoryTokens", "scopeKind": "class", "description": "unavailable"}, {"name": "lastCheckedAt: nowTs()", "scope": "checkIntegrationHealth.healthState", "scopeKind": "class", "description": "unavailable"}, {"name": "canva: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' }", "scope": "healthState.canva", "scopeKind": "class", "description": "unavailable"}, {"name": "meta: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },", "scope": "healthState.meta", "scopeKind": "class", "description": "unavailable"}, {"name": "openai: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },", "scope": "healthState.openai", "scopeKind": "class", "description": "unavailable"}, {"name": "whatsapp: { status: 'disconnected', lastCheckedAt: 0, lastErrorKey: '' },", "scope": "healthState.whatsapp", "scopeKind": "class", "description": "unavailable"}, {"name": "lastErrorKey: result.lastErrorKey,", "scope": "checkIntegrationHealth.healthState", "scopeKind": "class", "description": "unavailable"}, {"name": "let result = { status: HealthStatus.disconnected, lastErrorKey: '' };", "scope": "checkIntegrationHealth.result", "scopeKind": "class", "description": "unavailable"}, {"name": "meta: '',", "scope": "memoryTokens", "scopeKind": "class", "description": "unavailable"}, {"name": "status: result.status,", "scope": "checkIntegrationHealth.healthState", "scopeKind": "class", "description": "unavailable"}, {"name": "whatsapp: '',", "scope": "memoryTokens", "scopeKind": "class", "description": "unavailable"}]}