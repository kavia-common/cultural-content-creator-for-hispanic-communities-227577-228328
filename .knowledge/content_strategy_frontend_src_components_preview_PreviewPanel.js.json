{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "This file defines a React component called 'PreviewPanel' which provides a UI for previewing and exporting content across different channels (WhatsApp, Facebook). It includes subcomponents for validation, media previews, and sharing functionalities, and manages state related to content selection, validation, and export actions.", "external_files": ["../../services/channelConfig", "../../services/channelValidation", "../../services/exportUtils", "../../state/messages", "../../state/artifacts", "../../state/workflow"], "external_methods": ["useTranslation", "useAppMessages", "formatBytes", "validateForFacebook", "validateForWhatsApp", "copyTextToClipboard", "downloadTextFile"], "published": ["PreviewPanel"], "classes": [], "methods": [{"name": "formatTimeHHMM(date)", "description": "Formats a Date object into a 'HH:MM' string.", "scope": "", "scopeKind": ""}, {"name": "issueToI18nKey(issue)", "description": "Maps validation issue codes to translation keys for error messages.", "scope": "", "scopeKind": ""}, {"name": "issueSuggestionKey(issue)", "description": "Maps validation issue codes to translation keys for suggested fixes.", "scope": "", "scopeKind": ""}, {"name": "getCoordinatorApproved(workflowState)", "description": "Checks if the 'Coordinator' step in a workflow has been approved.", "scope": "", "scopeKind": ""}, {"name": "pickItem(slice, variationType)", "description": "Selects an item from a slice based on variationType, defaulting to first item.", "scope": "", "scopeKind": ""}, {"name": "buildExportText({ topic, artifactType, variationType, body, channel, includeEngagement, engagement })", "description": "Constructs the export text content based on various input parameters.", "scope": "", "scopeKind": ""}, {"name": "openWhatsAppShare(text)", "description": "Opens a WhatsApp share URL with the provided text.", "scope": "", "scopeKind": ""}, {"name": "openFacebookShare({ quote })", "description": "Opens a Facebook sharing URL with the specified quote.", "scope": "", "scopeKind": ""}, {"name": "FacebookPreview({ title, body, media })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "IssueLine({ issue })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "MediaFrame({ channel, media })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "PreviewPanel({ title, content, artifacts, workflowState })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ValidationRegion({ issues })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "WhatsAppPreview({ message, timestampLabel, media })", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["useEffect", "useMemo", "useRef", "useState", "useTranslation", "useAppMessages", "validateForWhatsApp", "validateForFacebook", "copyTextToClipboard", "downloadTextFile", "formatBytes", "getCoordinatorApproved", "pickItem", "buildExportText", "openWhatsAppShare", "openFacebookShare"], "search-terms": ["PreviewPanel", "channelConfig", "channelValidation", "exportUtils", "Messages", "Artifacts", "Workflow", "validation", "mediaPreview", "shareButtons", "ContentPreview", "ContentExporter"], "state": 2, "file_id": 16, "knowledge_revision": 182, "git_revision": "ffa5604db6edb21c59cc94b775332d0207131f0a", "revision_history": [{"39": "74f1a215a4dbfb17a3ef6c5fe918af92bc0539fc"}, {"54": "49f44cecf413dc082bfa14caba0b9480a1a4965b"}, {"85": "222bac8f9a1c4cd677b6fcba1dfa615adf4f8eb2"}, {"182": "ffa5604db6edb21c59cc94b775332d0207131f0a"}], "ctags": [{"_type": "tag", "name": "CHANNELS", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^          {media ? <MediaFrame channel={CHANNELS.whatsapp} media={media} \\/> : null}$/", "language": "JavaScript", "kind": "field", "scope": "WhatsAppPreview.media", "scopeKind": "class"}, {"_type": "tag", "name": "FacebookPreview", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function FacebookPreview({ title, body, media }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ title, body, media })"}, {"_type": "tag", "name": "IssueLine", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function IssueLine({ issue }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ issue })"}, {"_type": "tag", "name": "MediaFrame", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function MediaFrame({ channel, media }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ channel, media })"}, {"_type": "tag", "name": "PreviewPanel", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^export default function PreviewPanel({ title, content, artifacts, workflowState }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ title, content, artifacts, workflowState })"}, {"_type": "tag", "name": "ValidationRegion", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function ValidationRegion({ issues }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ issues })"}, {"_type": "tag", "name": "WhatsAppPreview", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function WhatsAppPreview({ message, timestampLabel, media }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ message, timestampLabel, media })"}, {"_type": "tag", "name": "aria", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^              aria-selected={channel === CHANNELS.facebook ? 'true' : 'false'}$/", "language": "JavaScript", "kind": "class", "scope": "PreviewPanel", "scopeKind": "class"}, {"_type": "tag", "name": "aria", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^              aria-selected={channel === CHANNELS.whatsapp ? 'true' : 'false'}$/", "language": "JavaScript", "kind": "class", "scope": "PreviewPanel", "scopeKind": "class"}, {"_type": "tag", "name": "buildExportText", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function buildExportText({ topic, artifactType, variationType, body, channel, includeEngagement,/", "language": "JavaScript", "kind": "function", "signature": "({ topic, artifactType, variationType, body, channel, includeEngagement, engagement })"}, {"_type": "tag", "name": "channel", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^              aria-selected={channel === CHANNELS.facebook ? 'true' : 'false'}$/", "language": "JavaScript", "kind": "property", "scope": "PreviewPanel.aria", "scopeKind": "class"}, {"_type": "tag", "name": "channel", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^              aria-selected={channel === CHANNELS.whatsapp ? 'true' : 'false'}$/", "language": "JavaScript", "kind": "property", "scope": "PreviewPanel.aria", "scopeKind": "class"}, {"_type": "tag", "name": "doCopy", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^              onClick={doCopy}$/", "language": "JavaScript", "kind": "field", "scope": "PreviewPanel.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "doDownload", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^              onClick={doDownload}$/", "language": "JavaScript", "kind": "field", "scope": "PreviewPanel.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "doShareFacebook", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^              onClick={doShareFacebook}$/", "language": "JavaScript", "kind": "field", "scope": "PreviewPanel.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "doShareWhatsApp", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^              onClick={doShareWhatsApp}$/", "language": "JavaScript", "kind": "field", "scope": "PreviewPanel.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "facebook ? 'tabBtnActive' : ''}", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^              className={`tabBtn ${channel === CHANNELS.facebook ? 'tabBtnActive' : ''}`}$/", "language": "JavaScript", "kind": "field", "scope": "PreviewPanel.className.tabBtn ${channel === CHANNELS", "scopeKind": "class"}, {"_type": "tag", "name": "formatTimeHHMM", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function formatTimeHHMM(date) {$/", "language": "JavaScript", "kind": "function", "signature": "(date)"}, {"_type": "tag", "name": "getCoordinatorApproved", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function getCoordinatorApproved(workflowState) {$/", "language": "JavaScript", "kind": "function", "signature": "(workflowState)"}, {"_type": "tag", "name": "issueSuggestionKey", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function issueSuggestionKey(issue) {$/", "language": "JavaScript", "kind": "function", "signature": "(issue)"}, {"_type": "tag", "name": "issueToI18nKey", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function issueToI18nKey(issue) {$/", "language": "JavaScript", "kind": "function", "signature": "(issue)"}, {"_type": "tag", "name": "openFacebookShare", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function openFacebookShare({ quote }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ quote })"}, {"_type": "tag", "name": "openWhatsAppShare", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function openWhatsAppShare(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)"}, {"_type": "tag", "name": "pickItem", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^function pickItem(slice, variationType) {$/", "language": "JavaScript", "kind": "function", "signature": "(slice, variationType)"}, {"_type": "tag", "name": "validationRegion ${has ? 'validationRegionActive' : ''}", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^    <section className={`validationRegion ${has ? 'validationRegionActive' : ''}`} aria-label={t/", "language": "JavaScript", "kind": "field", "scope": "ValidationRegion.AnonymousClassbaf814d80101", "scopeKind": "class"}, {"_type": "tag", "name": "whatsapp ? 'tabBtnActive' : ''}", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/components/preview/PreviewPanel.js", "pattern": "/^              className={`tabBtn ${channel === CHANNELS.whatsapp ? 'tabBtnActive' : ''}`}$/", "language": "JavaScript", "kind": "field", "scope": "PreviewPanel.className.tabBtn ${channel === CHANNELS", "scopeKind": "class"}], "hash": "4b9fe9a155da0e20f8eb9a06d906aa70", "format-version": 4, "code-base-name": "content_strategy_frontend", "filename": "content_strategy_frontend/src/components/preview/PreviewPanel.js", "fields": [{"name": "{media ? <MediaFrame channel={CHANNELS.whatsapp} media={media} \\/> : null}", "scope": "WhatsAppPreview.media", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-selected={channel === CHANNELS.facebook ? 'true' : 'false'}", "scope": "PreviewPanel.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-selected={channel === CHANNELS.whatsapp ? 'true' : 'false'}", "scope": "PreviewPanel.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={doCopy}", "scope": "PreviewPanel.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={doDownload}", "scope": "PreviewPanel.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={doShareFacebook}", "scope": "PreviewPanel.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={doShareWhatsApp}", "scope": "PreviewPanel.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "className={`tabBtn ${channel === CHANNELS.facebook ? 'tabBtnActive' : ''}`}", "scope": "PreviewPanel.className.tabBtn ${channel === CHANNELS", "scopeKind": "class", "description": "unavailable"}, {"name": "<section className={`validationRegion ${has ? 'validationRegionActive' : ''}`} aria-label={t/", "scope": "ValidationRegion.AnonymousClassbaf814d80101", "scopeKind": "class", "description": "unavailable"}, {"name": "className={`tabBtn ${channel === CHANNELS.whatsapp ? 'tabBtnActive' : ''}`}", "scope": "PreviewPanel.className.tabBtn ${channel === CHANNELS", "scopeKind": "class", "description": "unavailable"}]}