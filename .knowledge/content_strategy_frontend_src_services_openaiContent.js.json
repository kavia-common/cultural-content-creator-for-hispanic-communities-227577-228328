{"is_source_file": true, "format": "JavaScript", "description": "This file provides a set of service functions for content generation, including prompts for AI models to produce scripts, outlines, predictive suggestions, and engagement elements targeted at the US Hispanic community. It includes utility functions for normalizing inputs, constructing structured prompts, and handling responses from OpenAI's API.", "external_files": ["./openaiClient", "./openaiCaptions"], "external_methods": ["callOpenAIChatCompletions", "extractModelText", "getEffectiveOpenAIKey", "mapOpenAIErrorToI18nKey", "normalizeLanguage", "parseStrictJsonFromModelText"], "published": ["buildMicroreelScriptPrompt", "buildSilentVideoOutlinePrompt", "buildPredictivePrompt", "buildEngagementPrompt", "generateMicroreelScripts", "generateSilentVideoOutlines", "generatePredictiveSuggestions", "generateEngagementElements", "generateTopicSuggestions"], "classes": [], "methods": [{"name": "truncate(str, max)", "description": "Truncates a string to a specified maximum length, appending an ellipsis if truncated.", "scope": "", "scopeKind": ""}, {"name": "normalizeVariationType(v)", "description": "Normalizes variation type input string to predefined caption variation types.", "scope": "", "scopeKind": ""}, {"name": "normalizeThreeVariations(rawList, { language, emotion })", "description": "Normalizes a list of caption variations, ensuring each has required fields and defaults, and orders them by type.", "scope": "", "scopeKind": ""}, {"name": "buildMicroreelScriptPrompt({ topic, niche, emotion, language })", "description": "Constructs a strict JSON prompt for generating three microreel scripts with different variation types.", "scope": "", "scopeKind": ""}, {"name": "buildSilentVideoOutlinePrompt({ topic, niche, emotion, language })", "description": "Constructs a strict JSON prompt for generating three silent video outlines.", "scope": "", "scopeKind": ""}, {"name": "buildPredictivePrompt({ topic, niche, emotion, language, contentSample })", "description": "Constructs a strict JSON prompt for predictive content segments and actionable tweaks based on a content sample.", "scope": "", "scopeKind": ""}, {"name": "buildEngagementPrompt({ topic, niche, emotion, language })", "description": "Constructs a strict JSON prompt for generating engagement elements: survey, open question, challenge.", "scope": "", "scopeKind": ""}, {"name": "generateMicroreelScripts({ topic, niche, emotion, language })", "description": "Calls OpenAI API to generate three microreel scripts, processes, and normalizes the response.", "scope": "", "scopeKind": ""}, {"name": "generateSilentVideoOutlines({ topic, niche, emotion, language })", "description": "Calls OpenAI API to generate three silent video outlines, processes, and normalizes the response.", "scope": "", "scopeKind": ""}, {"name": "generatePredictiveSuggestions({ topic, niche, emotion, language, contentSample })", "description": "Calls OpenAI API to generate predictive segments and tweaks, processes, and normalizes the response.", "scope": "", "scopeKind": ""}, {"name": "generateEngagementElements({ topic, niche, emotion, language })", "description": "Calls OpenAI API to generate engagement elements, processes, and normalizes the response.", "scope": "", "scopeKind": ""}, {"name": "generateTopicSuggestions({ topic, language })", "description": "Provides topic suggestions based on a subject, either via API or fallback suggestions.", "scope": "", "scopeKind": ""}], "calls": ["callOpenAIChatCompletions", "extractModelText", "getEffectiveOpenAIKey", "mapOpenAIErrorToI18nKey", "parseStrictJsonFromModelText"], "search-terms": ["openaiContent", "microreel scripts", "silent video outline", "predictive content", "engagement prompts", "Hispanic communities content", "prompt construction", "content generation"], "state": 2, "file_id": 51, "knowledge_revision": 192, "git_revision": "ffa5604db6edb21c59cc94b775332d0207131f0a", "ctags": [{"_type": "tag", "name": "buildEngagementPrompt", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^export function buildEngagementPrompt({ topic, niche, emotion, language }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ topic, niche, emotion, language })"}, {"_type": "tag", "name": "buildMicroreelScriptPrompt", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^export function buildMicroreelScriptPrompt({ topic, niche, emotion, language }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ topic, niche, emotion, language })"}, {"_type": "tag", "name": "buildPredictivePrompt", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^export function buildPredictivePrompt({ topic, niche, emotion, language, contentSample }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ topic, niche, emotion, language, contentSample })"}, {"_type": "tag", "name": "buildSilentVideoOutlinePrompt", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^export function buildSilentVideoOutlinePrompt({ topic, niche, emotion, language }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ topic, niche, emotion, language })"}, {"_type": "tag", "name": "generateEngagementElements", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^export async function generateEngagementElements({ topic, niche, emotion, language }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ topic, niche, emotion, language })"}, {"_type": "tag", "name": "generateMicroreelScripts", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^export async function generateMicroreelScripts({ topic, niche, emotion, language }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ topic, niche, emotion, language })"}, {"_type": "tag", "name": "generatePredictiveSuggestions", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^export async function generatePredictiveSuggestions({ topic, niche, emotion, language, contentSa/", "language": "JavaScript", "kind": "function", "signature": "({ topic, niche, emotion, language, contentSample })"}, {"_type": "tag", "name": "generateSilentVideoOutlines", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^export async function generateSilentVideoOutlines({ topic, niche, emotion, language }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ topic, niche, emotion, language })"}, {"_type": "tag", "name": "generateTopicSuggestions", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^export async function generateTopicSuggestions({ topic, language }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ topic, language })"}, {"_type": "tag", "name": "normalizeThreeVariations", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^function normalizeThreeVariations(rawList, { language, emotion }) {$/", "language": "JavaScript", "kind": "function", "signature": "(rawList, { language, emotion })"}, {"_type": "tag", "name": "normalizeVariationType", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^function normalizeVariationType(v) {$/", "language": "JavaScript", "kind": "function", "signature": "(v)"}, {"_type": "tag", "name": "truncate", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/services/openaiContent.js", "pattern": "/^function truncate(str, max) {$/", "language": "JavaScript", "kind": "function", "signature": "(str, max)"}], "hash": "a331e31a934400107f083f8a14968620", "format-version": 4, "code-base-name": "content_strategy_frontend", "filename": "content_strategy_frontend/src/services/openaiContent.js", "revision_history": [{"192": "ffa5604db6edb21c59cc94b775332d0207131f0a"}]}