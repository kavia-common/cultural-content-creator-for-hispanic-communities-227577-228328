{"is_source_file": true, "format": "JavaScript", "description": "This file defines and manages the workflow state and logic for a React-based frontend component. It includes constants, state initialization, normalization, reducer logic, context creation, and hooks for managing workflow steps, events, and progression within a content creation process.", "external_files": ["../domain/workflow"], "external_methods": [], "published": ["WorkflowProvider", "useWorkflow", "getWorkflowRoleUiStateFromSteps"], "classes": [], "methods": [{"name": "workflowReducer(state, action)", "description": "Reducer function handling various workflow actions such as loading, pausing, resuming, approving, and advancing steps.", "scope": "", "scopeKind": ""}, {"name": "createInitialState(artifactId)", "description": "Creates the initial workflow state for a given artifact.", "scope": "", "scopeKind": ""}, {"name": "normalizeLoadedState(raw, artifactId)", "description": "Normalizes and loads a raw saved state, ensuring data consistency and defaults.", "scope": "", "scopeKind": ""}, {"name": "addEvent(events, event)", "description": "Adds a new event to the events list, maintaining a maximum of 50 recent events.", "scope": "", "scopeKind": ""}, {"name": "setStep(state, stepId, patch)", "description": "Updates a specific step's data within the state.", "scope": "", "scopeKind": ""}, {"name": "advanceIfPossible(state)", "description": "Handles advancing the workflow to the next step if conditions are met.", "scope": "", "scopeKind": ""}, {"name": "WorkflowProvider({ children, artifactId })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "canAdvanceFromStep(step)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "createInitialSteps()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getWorkflowRoleUiStateFromSteps({ steps, currentStepId })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "isWorkflowPaused(state)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "nowTs()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "safeParse(json, fallback)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "storageKeyForArtifact(artifactId)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "useWorkflow()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["useReducer", "useContext", "useMemo", "useEffect", "JSON.parse", "JSON.stringify", "window.sessionStorage.getItem", "window.sessionStorage.setItem", "window.localStorage.getItem", "window.localStorage.setItem", "Date.now"], "search-terms": ["WorkflowStepStatus", "WorkflowEventType", "createInitialState", "normalizeLoadedState", "workflowReducer", "WorkflowProvider", "useWorkflow", "advanceIfPossible", "setStep", "addEvent"], "state": 2, "file_id": 40, "knowledge_revision": 106, "git_revision": "4ee3bd9677ec10ef90eada0c70339c25df1d73d4", "ctags": [{"_type": "tag", "name": "STORAGE_PREFIX", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^const STORAGE_PREFIX = 'ccch.workflow.v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "WorkflowContext", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^const WorkflowContext = createContext(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "WorkflowProvider", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^export function WorkflowProvider({ children, artifactId }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ children, artifactId })"}, {"_type": "tag", "name": "addEvent", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function addEvent(events, event) {$/", "language": "JavaScript", "kind": "function", "signature": "(events, event)"}, {"_type": "tag", "name": "advanceIfPossible", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function advanceIfPossible(state) {$/", "language": "JavaScript", "kind": "function", "signature": "(state)"}, {"_type": "tag", "name": "canAdvanceFromStep", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function canAdvanceFromStep(step) {$/", "language": "JavaScript", "kind": "function", "signature": "(step)"}, {"_type": "tag", "name": "createInitialState", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function createInitialState(artifactId) {$/", "language": "JavaScript", "kind": "function", "signature": "(artifactId)"}, {"_type": "tag", "name": "createInitialSteps", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function createInitialSteps() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^  const e = {$/", "language": "JavaScript", "kind": "class", "scope": "addEvent", "scopeKind": "class"}, {"_type": "tag", "name": "getWorkflowRoleUiStateFromSteps", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^export function getWorkflowRoleUiStateFromSteps({ steps, currentStepId }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ steps, currentStepId })"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^    id: event.id || `${nowTs()}-${Math.random().toString(16).slice(2)}`,$/", "language": "JavaScript", "kind": "property", "scope": "addEvent.e", "scopeKind": "class"}, {"_type": "tag", "name": "isWorkflowPaused", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function isWorkflowPaused(state) {$/", "language": "JavaScript", "kind": "function", "signature": "(state)"}, {"_type": "tag", "name": "normalizeLoadedState", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function normalizeLoadedState(raw, artifactId) {$/", "language": "JavaScript", "kind": "function", "signature": "(raw, artifactId)"}, {"_type": "tag", "name": "nowTs", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function nowTs() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^    payload: event.payload ?? {}$/", "language": "JavaScript", "kind": "property", "scope": "addEvent.e", "scopeKind": "class"}, {"_type": "tag", "name": "safeParse", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function safeParse(json, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(json, fallback)"}, {"_type": "tag", "name": "setStep", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function setStep(state, stepId, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(state, stepId, patch)"}, {"_type": "tag", "name": "stepId", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^    stepId: event.stepId ?? null,$/", "language": "JavaScript", "kind": "property", "scope": "addEvent.e", "scopeKind": "class"}, {"_type": "tag", "name": "storageKeyForArtifact", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function storageKeyForArtifact(artifactId) {$/", "language": "JavaScript", "kind": "function", "signature": "(artifactId)"}, {"_type": "tag", "name": "ts", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^    ts: event.ts || nowTs(),$/", "language": "JavaScript", "kind": "property", "scope": "addEvent.e", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^    type: event.type,$/", "language": "JavaScript", "kind": "property", "scope": "addEvent.e", "scopeKind": "class"}, {"_type": "tag", "name": "useWorkflow", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^export function useWorkflow() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^  return <WorkflowContext.Provider value={value}>{children}<\\/WorkflowContext.Provider>;$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}, {"_type": "tag", "name": "workflowReducer", "path": "/home/kavia/workspace/code-generation/cultural-content-creator-for-hispanic-communities-227577-228328/content_strategy_frontend/src/state/workflow.js", "pattern": "/^function workflowReducer(state, action) {$/", "language": "JavaScript", "kind": "function", "signature": "(state, action)"}], "hash": "ac0e4a9bdd657db587fc413462b4445a", "format-version": 4, "code-base-name": "content_strategy_frontend", "filename": "content_strategy_frontend/src/state/workflow.js", "fields": [{"name": "id: event.id || `${nowTs()}-${Math.random().toString(16).slice(2)}`,", "scope": "addEvent.e", "scopeKind": "class", "description": "unavailable"}, {"name": "payload: event.payload ?? {}", "scope": "addEvent.e", "scopeKind": "class", "description": "unavailable"}, {"name": "stepId: event.stepId ?? null,", "scope": "addEvent.e", "scopeKind": "class", "description": "unavailable"}, {"name": "ts: event.ts || nowTs(),", "scope": "addEvent.e", "scopeKind": "class", "description": "unavailable"}, {"name": "type: event.type,", "scope": "addEvent.e", "scopeKind": "class", "description": "unavailable"}, {"name": "return <WorkflowContext.Provider value={value}>{children}<\\/WorkflowContext.Provider>;", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"106": "4ee3bd9677ec10ef90eada0c70339c25df1d73d4"}]}