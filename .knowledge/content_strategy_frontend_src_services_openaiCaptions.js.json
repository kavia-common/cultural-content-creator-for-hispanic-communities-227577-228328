{"is_source_file": true, "format": "JavaScript", "description": "Frontend JavaScript module for generating AI-based captions with cultural nuance, including functions for managing API keys, building prompts, calling OpenAI API, and processing responses. It is tailored for use in a web frontend environment, specifically for Hispanic community content.", "external_files": ["fetch API (built-in browser API)"], "external_methods": ["fetch", "JSON.parse", "JSON.stringify"], "published": ["setOpenAIKeyForSession", "getOpenAIKeySource", "getEffectiveOpenAIKey", "buildCaptionPrompt", "generateCaptions", "CaptionVariationType"], "classes": [], "methods": [{"name": "setOpenAIKeyForSession", "description": "Sets a temporary in-memory OpenAI API key for the current browser session."}, {"name": "getOpenAIKeySource", "description": "Returns the source of the OpenAI API key: environment variable, in-memory, or none."}, {"name": "getEffectiveOpenAIKey", "description": "Returns the effective OpenAI API key, prioritizing environment variable over in-memory key."}, {"name": "buildCaptionPrompt", "description": "Constructs a prompt string for OpenAI to generate three caption variants based on input parameters."}, {"name": "generateCaptions", "description": "Calls OpenAI API to generate caption variants based on provided topic, niche, emotion, and language."}], "calls": ["fetch", "callOpenAIChatCompletions", "extractTextFromChatCompletionPayload", "safeJsonParse", "normalizeCaptionsResult"], "search-terms": ["openaiCaptions", "caption generation", "frontend OpenAI service", "Hispanic communities", "social media captions"], "state": 2, "file_id": 30, "knowledge_revision": 147, "git_revision": "99a0e67c42de75a9e1bf3e2c18131c85da8ee23b", "revision_history": [{"70": "99a0e67c42de75a9e1bf3e2c18131c85da8ee23b"}, {"147": "99a0e67c42de75a9e1bf3e2c18131c85da8ee23b"}], "ctags": [], "filename": "content_strategy_frontend/src/services/openaiCaptions.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/cultural-content-creator-for-hispanic-communities-227577-228328.git:kavia-main"}